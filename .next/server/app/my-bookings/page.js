(()=>{var e={};e.id=819,e.ids=[819],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},72648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>l});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),c=s(68300),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);s.d(t,o);let l=["",{children:["my-bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,34144)),"D:\\github\\cryo-booking\\app\\my-bookings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59504)),"D:\\github\\cryo-booking\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\github\\cryo-booking\\app\\my-bookings\\page.tsx"],x="/my-bookings/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/my-bookings/page",pathname:"/my-bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},74936:(e,t,s)=>{Promise.resolve().then(s.bind(s,6103)),Promise.resolve().then(s.bind(s,19503))},6103:(e,t,s)=>{"use strict";s.r(t),s.d(t,{MyBookingsList:()=>g});var r=s(95344),a=s(3729),i=s(69436),n=s(61351),c=s(25092),o=s(91626),l=s(69224);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,l.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),x=(0,l.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,l.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var m=s(25545),p=s(80508);function g(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),{toast:g}=(0,c.pm)();(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/bookings");if(e.ok){let s=(await e.json()).map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime),createdAt:new Date(e.createdAt)}));t(s)}}catch(e){console.error("取得預約列表失敗:",e),g({title:"載入失敗",description:"無法載入預約列表",variant:"destructive"})}finally{l(!1)}},y=e=>{switch(e){case"APPROVED":return r.jsx(d,{className:"h-5 w-5 text-green-600"});case"REJECTED":return r.jsx(x,{className:"h-5 w-5 text-red-600"});default:return r.jsx(u,{className:"h-5 w-5 text-orange-600"})}},b=e=>{switch(e){case"APPROVED":return"已核准";case"REJECTED":return"已拒絕";default:return"待審核"}},j=e=>{switch(e){case"APPROVED":return"default";case"REJECTED":return"destructive";default:return"secondary"}};if(s)return r.jsx("div",{className:"text-center py-8",children:"載入中..."});if(0===e.length)return(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(m.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"您還沒有任何預約記錄"}),r.jsx("p",{className:"text-sm mt-2",children:"點擊首頁日曆建立您的第一個預約"})]});let f=e.sort((e,t)=>{let s={PENDING:0,APPROVED:1,REJECTED:2},r=s[e.status]-s[t.status];return 0!==r?r:t.createdAt.getTime()-e.createdAt.getTime()});return r.jsx("div",{className:"space-y-4",children:f.map(e=>(0,r.jsxs)(n.Zb,{className:`
          border-l-4 
          ${"APPROVED"===e.status?"border-l-green-400":"REJECTED"===e.status?"border-l-red-400":"border-l-orange-400"}
        `,children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.ll,{className:"text-lg flex items-center gap-2",children:[y(e.status),e.equipment.name]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[e.equipment.location&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(p.Z,{className:"h-4 w-4"}),e.equipment.location]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(m.Z,{className:"h-4 w-4"}),"申請時間：",(0,o.o0)(e.createdAt)]})]})]}),r.jsx(i.C,{variant:j(e.status),children:b(e.status)})]})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"使用時間"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,o.o0)(e.startTime)," - ",(0,o.o0)(e.endTime)]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"使用目的"}),r.jsx("p",{className:"text-sm text-gray-600",children:e.purpose})]}),e.adminNotes&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"管理員備註"}),r.jsx("div",{className:`p-3 rounded-lg text-sm ${"REJECTED"===e.status?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}`,children:e.adminNotes})]}),"PENDING"===e.status&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-orange-600 bg-orange-50 p-3 rounded-lg",children:[r.jsx(u,{className:"h-4 w-4"}),"您的預約正在等待管理員審核，審核結果將透過郵件通知您"]}),"APPROVED"===e.status&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 p-3 rounded-lg",children:[r.jsx(d,{className:"h-4 w-4"}),"您的預約已核准，請準時使用設備"]}),"REJECTED"===e.status&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg",children:[r.jsx(x,{className:"h-4 w-4"}),"您的預約已被拒絕，如有疑問請聯繫管理員"]})]})]},e.id))})}},69436:(e,t,s)=>{"use strict";s.d(t,{C:()=>c});var r=s(95344);s(3729);var a=s(49247),i=s(91626);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,...s}){return r.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...s})}},34144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(25036),a=s(40002),i=s(81355),n=s(3205),c=s(44551),o=s(26212),l=s(96184),d=s(86843);let x=(0,d.createProxy)(String.raw`D:\github\cryo-booking\components\my-bookings-list.tsx`),{__esModule:u,$$typeof:m}=x;x.default;let p=(0,d.createProxy)(String.raw`D:\github\cryo-booking\components\my-bookings-list.tsx#MyBookingsList`);async function g(){return await (0,i.getServerSession)(n.L)||(0,c.redirect)("/auth/signin"),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(o.w,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"我的預約"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"檢視和管理您的設備預約記錄"})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{children:"預約記錄"}),r.jsx(l.SZ,{children:"這裡顯示您所有的預約申請和狀態"})]}),r.jsx(l.aY,{children:r.jsx(a.Suspense,{fallback:r.jsx("div",{children:"載入中..."}),children:r.jsx(p,{})})})]})]})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,898,514,345,491,751,587],()=>s(72648));module.exports=r})();