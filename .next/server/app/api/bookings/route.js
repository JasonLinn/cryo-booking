"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bookings/route";
exports.ids = ["app/api/bookings/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "./action-async-storage.external?8652":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?0211":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?137c":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.ts&appDir=D%3A%5Cgithub%5Ccryo-booking%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub%5Ccryo-booking&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.ts&appDir=D%3A%5Cgithub%5Ccryo-booking%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub%5Ccryo-booking&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_github_cryo_booking_app_api_bookings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/bookings/route.ts */ \"(rsc)/./app/api/bookings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bookings/route\",\n        pathname: \"/api/bookings\",\n        filename: \"route\",\n        bundlePath: \"app/api/bookings/route\"\n    },\n    resolvedPagePath: \"D:\\\\github\\\\cryo-booking\\\\app\\\\api\\\\bookings\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_github_cryo_booking_app_api_bookings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/bookings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZib29raW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYm9va2luZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZib29raW5ncyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDZ2l0aHViJTVDY3J5by1ib29raW5nJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDZ2l0aHViJTVDY3J5by1ib29raW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ007QUFDbkY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcnlvLWJvb2tpbmcvPzFmMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcZ2l0aHViXFxcXGNyeW8tYm9va2luZ1xcXFxhcHBcXFxcYXBpXFxcXGJvb2tpbmdzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ib29raW5ncy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Jvb2tpbmdzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ib29raW5ncy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXGdpdGh1YlxcXFxjcnlvLWJvb2tpbmdcXFxcYXBwXFxcXGFwaVxcXFxib29raW5nc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9ib29raW5ncy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.ts&appDir=D%3A%5Cgithub%5Ccryo-booking%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub%5Ccryo-booking&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/bookings/route.ts":
/*!***********************************!*\
  !*** ./app/api/bookings/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./lib/utils.ts\");\n\n\n\n\n\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        if (!session) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"請先登入\"\n            }, {\n                status: 401\n            });\n        }\n        const url = new URL(request.url);\n        const status = url.searchParams.get(\"status\");\n        const userId = url.searchParams.get(\"userId\");\n        const where = {};\n        if (status) {\n            where.status = status;\n        }\n        // 一般使用者只能看自己的預約，管理員可以看所有預約\n        if (session.user.role !== \"ADMIN\") {\n            where.userId = session.user.id;\n        } else if (userId) {\n            where.userId = userId;\n        }\n        const bookings = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.booking.findMany({\n            where,\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                },\n                equipment: {\n                    select: {\n                        id: true,\n                        name: true,\n                        location: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(bookings);\n    } catch (error) {\n        console.error(\"取得預約列表失敗:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"取得預約列表失敗\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        const data = await request.json();\n        const { equipmentId, startTime, endTime, purpose, guestName, guestEmail } = data;\n        // 檢查時間格式\n        const start = new Date(startTime);\n        const end = new Date(endTime);\n        if (start >= end) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"結束時間必須晚於開始時間\"\n            }, {\n                status: 400\n            });\n        }\n        if (start < new Date()) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"不能預約過去的時間\"\n            }, {\n                status: 400\n            });\n        }\n        // 檢查是否為可預約日期（非週末且非國定假日）\n        if (!(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.isBookingAvailable)(start)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"週末和國定假日不開放預約\"\n            }, {\n                status: 400\n            });\n        }\n        // 檢查是否有衝突的預約\n        const conflicts = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.booking.findMany({\n            where: {\n                equipmentId,\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"APPROVED\"\n                    ]\n                },\n                OR: [\n                    {\n                        startTime: {\n                            lt: end\n                        },\n                        endTime: {\n                            gt: start\n                        }\n                    }\n                ]\n            }\n        });\n        if (conflicts.length > 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"此時段已有其他預約\"\n            }, {\n                status: 400\n            });\n        }\n        let userId;\n        if (session) {\n            // 已登入使用者\n            userId = session.user.id;\n        } else {\n            // 訪客預約，需要提供姓名和 email\n            if (!guestName || !guestEmail) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"請提供姓名和電子郵件\"\n                }, {\n                    status: 400\n                });\n            }\n            // 檢查是否已有此 email 的使用者\n            let guestUser = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n                where: {\n                    email: guestEmail\n                }\n            });\n            if (!guestUser) {\n                // 建立新的訪客使用者\n                guestUser = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n                    data: {\n                        email: guestEmail,\n                        name: guestName,\n                        role: \"USER\"\n                    }\n                });\n            }\n            userId = guestUser.id;\n        }\n        const booking = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.booking.create({\n            data: {\n                userId,\n                equipmentId,\n                startTime: start,\n                endTime: end,\n                purpose\n            },\n            include: {\n                equipment: true,\n                user: true\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(booking);\n    } catch (error) {\n        console.error(\"建立預約失敗:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"建立預約失敗\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUNQSSxXQUFXO2dCQUNYVixNQUFNO1lBQ1I7UUFDRjtRQUVBLE9BQU9qQixrRkFBWUEsQ0FBQ1EsSUFBSSxDQUFDYTtJQUMzQixFQUFFLE9BQU9aLE9BQU87UUFDZHNCLFFBQVF0QixLQUFLLENBQUMsV0FBV0E7UUFDekIsT0FBT1Qsa0ZBQVlBLENBQUNRLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFTLEdBQ2xCO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3J5by1ib29raW5nLy4vYXBwL2FwaS9ib29raW5ncy9yb3V0ZS50cz8xN2EyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvZGInXHJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnXHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aCdcclxuaW1wb3J0IHsgc2VuZEVtYWlsLCBnZW5lcmF0ZUJvb2tpbmdBcHByb3ZhbEVtYWlsLCBnZW5lcmF0ZUJvb2tpbmdSZWplY3Rpb25FbWFpbCB9IGZyb20gJ0AvbGliL2VtYWlsJ1xyXG5pbXBvcnQgeyBpc0Jvb2tpbmdBdmFpbGFibGUgfSBmcm9tICdAL2xpYi91dGlscydcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ+iri+WFiOeZu+WFpScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCBzdGF0dXMgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnc3RhdHVzJylcclxuICAgIGNvbnN0IHVzZXJJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKVxyXG5cclxuICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7fVxyXG4gICAgXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgIHdoZXJlLnN0YXR1cyA9IHN0YXR1c1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDkuIDoiKzkvb/nlKjogIXlj6rog73nnIvoh6rlt7HnmoTpoJDntITvvIznrqHnkIblk6Hlj6/ku6XnnIvmiYDmnInpoJDntIRcclxuICAgIGlmIChzZXNzaW9uLnVzZXIucm9sZSAhPT0gJ0FETUlOJykge1xyXG4gICAgICB3aGVyZS51c2VySWQgPSBzZXNzaW9uLnVzZXIuaWRcclxuICAgIH0gZWxzZSBpZiAodXNlcklkKSB7XHJcbiAgICAgIHdoZXJlLnVzZXJJZCA9IHVzZXJJZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvb2tpbmdzID0gYXdhaXQgcHJpc21hLmJvb2tpbmcuZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVxdWlwbWVudDoge1xyXG4gICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihib29raW5ncylcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign5Y+W5b6X6aCQ57SE5YiX6KGo5aSx5pWXOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAn5Y+W5b6X6aCQ57SE5YiX6KGo5aSx5pWXJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB7IGVxdWlwbWVudElkLCBzdGFydFRpbWUsIGVuZFRpbWUsIHB1cnBvc2UsIGd1ZXN0TmFtZSwgZ3Vlc3RFbWFpbCB9ID0gZGF0YVxyXG5cclxuICAgIC8vIOaqouafpeaZgumWk+agvOW8j1xyXG4gICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShzdGFydFRpbWUpXHJcbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmRUaW1lKVxyXG5cclxuICAgIGlmIChzdGFydCA+PSBlbmQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfntZDmnZ/mmYLplpPlv4XpoIjmmZrmlrzplovlp4vmmYLplpMnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3RhcnQgPCBuZXcgRGF0ZSgpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn5LiN6IO96aCQ57SE6YGO5Y6755qE5pmC6ZaTJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qqi5p+l5piv5ZCm54K65Y+v6aCQ57SE5pel5pyf77yI6Z2e6YCx5pyr5LiU6Z2e5ZyL5a6a5YGH5pel77yJXHJcbiAgICBpZiAoIWlzQm9va2luZ0F2YWlsYWJsZShzdGFydCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfpgLHmnKvlkozlnIvlrprlgYfml6XkuI3plovmlL7poJDntIQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDmqqLmn6XmmK/lkKbmnInooZ3nqoHnmoTpoJDntIRcclxuICAgIGNvbnN0IGNvbmZsaWN0cyA9IGF3YWl0IHByaXNtYS5ib29raW5nLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmU6IHtcclxuICAgICAgICBlcXVpcG1lbnRJZCxcclxuICAgICAgICBzdGF0dXM6IHsgaW46IFsnUEVORElORycsICdBUFBST1ZFRCddIH0sXHJcbiAgICAgICAgT1I6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiB7IGx0OiBlbmQgfSxcclxuICAgICAgICAgICAgZW5kVGltZTogeyBndDogc3RhcnQgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICfmraTmmYLmrrXlt7LmnInlhbbku5bpoJDntIQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdXNlcklkOiBzdHJpbmdcclxuXHJcbiAgICBpZiAoc2Vzc2lvbikge1xyXG4gICAgICAvLyDlt7LnmbvlhaXkvb/nlKjogIVcclxuICAgICAgdXNlcklkID0gc2Vzc2lvbi51c2VyLmlkXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDoqKrlrqLpoJDntITvvIzpnIDopoHmj5Dkvpvlp5PlkI3lkowgZW1haWxcclxuICAgICAgaWYgKCFndWVzdE5hbWUgfHwgIWd1ZXN0RW1haWwpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAn6KuL5o+Q5L6b5aeT5ZCN5ZKM6Zu75a2Q6YO15Lu2JyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDmqqLmn6XmmK/lkKblt7LmnInmraQgZW1haWwg55qE5L2/55So6ICFXHJcbiAgICAgIGxldCBndWVzdFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBlbWFpbDogZ3Vlc3RFbWFpbCB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoIWd1ZXN0VXNlcikge1xyXG4gICAgICAgIC8vIOW7uueri+aWsOeahOioquWuouS9v+eUqOiAhVxyXG4gICAgICAgIGd1ZXN0VXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiBndWVzdEVtYWlsLFxyXG4gICAgICAgICAgICBuYW1lOiBndWVzdE5hbWUsXHJcbiAgICAgICAgICAgIHJvbGU6ICdVU0VSJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVzZXJJZCA9IGd1ZXN0VXNlci5pZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvb2tpbmcgPSBhd2FpdCBwcmlzbWEuYm9va2luZy5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGVxdWlwbWVudElkLFxyXG4gICAgICAgIHN0YXJ0VGltZTogc3RhcnQsXHJcbiAgICAgICAgZW5kVGltZTogZW5kLFxyXG4gICAgICAgIHB1cnBvc2UsXHJcbiAgICAgIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBlcXVpcG1lbnQ6IHRydWUsXHJcbiAgICAgICAgdXNlcjogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihib29raW5nKVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCflu7rnq4vpoJDntITlpLHmlZc6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICflu7rnq4vpoJDntITlpLHmlZcnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiaXNCb29raW5nQXZhaWxhYmxlIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ1cmwiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJ1c2VySWQiLCJ3aGVyZSIsInVzZXIiLCJyb2xlIiwiaWQiLCJib29raW5ncyIsImJvb2tpbmciLCJmaW5kTWFueSIsImluY2x1ZGUiLCJzZWxlY3QiLCJuYW1lIiwiZW1haWwiLCJlcXVpcG1lbnQiLCJsb2NhdGlvbiIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJjb25zb2xlIiwiUE9TVCIsImRhdGEiLCJlcXVpcG1lbnRJZCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJwdXJwb3NlIiwiZ3Vlc3ROYW1lIiwiZ3Vlc3RFbWFpbCIsInN0YXJ0IiwiRGF0ZSIsImVuZCIsImNvbmZsaWN0cyIsImluIiwiT1IiLCJsdCIsImd0IiwibGVuZ3RoIiwiZ3Vlc3RVc2VyIiwiZmluZFVuaXF1ZSIsImNyZWF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bookings/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_db__WEBPACK_IMPORTED_MODULE_3__.prisma),\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) return null;\n                // 預設管理員帳號\n                if (credentials.email === \"admin@example.com\" && credentials.password === \"admin123\") {\n                    let user = await _db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        }\n                    });\n                    if (!user) {\n                        user = await _db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.create({\n                            data: {\n                                email: credentials.email,\n                                name: \"系統管理員\",\n                                role: \"ADMIN\"\n                            }\n                        });\n                    }\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: user.role\n                    };\n                }\n                // 測試使用者帳號\n                if (credentials.email === \"user@example.com\" && credentials.password === \"user123\") {\n                    let user = await _db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        }\n                    });\n                    if (!user) {\n                        user = await _db__WEBPACK_IMPORTED_MODULE_3__.prisma.user.create({\n                            data: {\n                                email: credentials.email,\n                                name: \"測試使用者\",\n                                role: \"USER\"\n                            }\n                        });\n                    }\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: user.role\n                    };\n                }\n                // 無效的憑證\n                return null;\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n                token.id = user.id;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    session: {\n        strategy: \"jwt\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeW8tYm9va2luZy8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJ1xyXG5pbXBvcnQgeyBQcmlzbWFBZGFwdGVyIH0gZnJvbSAnQG5leHQtYXV0aC9wcmlzbWEtYWRhcHRlcidcclxuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlJ1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL2RiJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XHJcbiAgYWRhcHRlcjogUHJpc21hQWRhcHRlcihwcmlzbWEpLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCEsXHJcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQhLFxyXG4gICAgfSksXHJcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcclxuICAgICAgbmFtZTogJ2NyZWRlbnRpYWxzJyxcclxuICAgICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBlbWFpbDogeyBsYWJlbDogJ0VtYWlsJywgdHlwZTogJ2VtYWlsJyB9LFxyXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHJldHVybiBudWxsXHJcblxyXG4gICAgICAgIC8vIOmgkOioreeuoeeQhuWToeW4s+iZn1xyXG4gICAgICAgIGlmIChjcmVkZW50aWFscy5lbWFpbCA9PT0gJ2FkbWluQGV4YW1wbGUuY29tJyAmJiBjcmVkZW50aWFscy5wYXNzd29yZCA9PT0gJ2FkbWluMTIzJykge1xyXG4gICAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH1cclxuICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCxcclxuICAgICAgICAgICAgICAgIG5hbWU6ICfns7vntbHnrqHnkIblk6EnLFxyXG4gICAgICAgICAgICAgICAgcm9sZTogJ0FETUlOJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5ris6Kmm5L2/55So6ICF5biz6JmfXHJcbiAgICAgICAgaWYgKGNyZWRlbnRpYWxzLmVtYWlsID09PSAndXNlckBleGFtcGxlLmNvbScgJiYgY3JlZGVudGlhbHMucGFzc3dvcmQgPT09ICd1c2VyMTIzJykge1xyXG4gICAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH1cclxuICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCxcclxuICAgICAgICAgICAgICAgIG5hbWU6ICfmuKzoqabkvb/nlKjogIUnLFxyXG4gICAgICAgICAgICAgICAgcm9sZTogJ1VTRVInXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDnhKHmlYjnmoTmhpHorYlcclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIF0sXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogJy9hdXRoL3NpZ25pbicsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5yb2xlID0gKHVzZXIgYXMgYW55KS5yb2xlXHJcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRva2VuXHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcclxuICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nXHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlIGFzIHN0cmluZ1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZXNzaW9uXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxyXG4gIH0sXHJcbn1cclxuIl0sIm5hbWVzIjpbIlByaXNtYUFkYXB0ZXIiLCJHb29nbGVQcm92aWRlciIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNyZWF0ZSIsImRhdGEiLCJyb2xlIiwiaWQiLCJwYWdlcyIsInNpZ25JbiIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsInN0cmF0ZWd5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBRTdDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FBU0YsZ0JBQWdCRSxNQUFNLElBQUksSUFBSUgsd0RBQVlBLEdBQUU7QUFFbEUsSUFBSUksSUFBeUIsRUFBY0gsZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3J5by1ib29raW5nLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatDateTime: () => (/* binding */ formatDateTime),\n/* harmony export */   hasTimeConflict: () => (/* binding */ hasTimeConflict),\n/* harmony export */   isBookingAvailable: () => (/* binding */ isBookingAvailable),\n/* harmony export */   isPublicHoliday: () => (/* binding */ isPublicHoliday),\n/* harmony export */   isTimeSlotAvailable: () => (/* binding */ isTimeSlotAvailable),\n/* harmony export */   isWeekday: () => (/* binding */ isWeekday)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n/* harmony import */ var _barrel_optimize_names_isWeekend_date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=isWeekend!=!date-fns */ \"(rsc)/./node_modules/date-fns/isWeekend.mjs\");\n\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\n// 檢查是否為工作日\nfunction isWeekday(date) {\n    const day = date.getDay();\n    return day >= 1 && day <= 5 // Monday to Friday\n    ;\n}\n// 檢查是否為國定假日\nfunction isPublicHoliday(date) {\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1 // getMonth() returns 0-11\n    ;\n    const day = date.getDate();\n    // 台灣國定假日 (簡化版本，只包含確定的國定假日)\n    const holidays = [\n        // 元旦 (1/1)\n        {\n            month: 1,\n            day: 1\n        },\n        // 和平紀念日 (2/28)\n        {\n            month: 2,\n            day: 28\n        },\n        // 清明節 (4/4)\n        {\n            month: 4,\n            day: 4\n        },\n        // 勞動節 (5/1)\n        {\n            month: 5,\n            day: 1\n        },\n        // 國慶日 (10/10)\n        {\n            month: 10,\n            day: 10\n        }\n    ];\n    return holidays.some((holiday)=>holiday.month === month && holiday.day === day);\n}\n// 檢查日期是否可以預約 (非週末且非國定假日)\nfunction isBookingAvailable(date) {\n    const isWeekendDay = (0,_barrel_optimize_names_isWeekend_date_fns__WEBPACK_IMPORTED_MODULE_2__.isWeekend)(date) // 使用 date-fns 的 isWeekend 函式\n    ;\n    const isHoliday = isPublicHoliday(date);\n    return !isWeekendDay && !isHoliday;\n}\n// 檢查時間是否在允許的時段內\nfunction isTimeSlotAvailable(date, hour, timeSlots) {\n    const dayOfWeek = date.getDay();\n    return timeSlots.some((slot)=>slot.isActive && slot.dayOfWeek === dayOfWeek && hour >= slot.startHour && hour < slot.endHour);\n}\n// 格式化日期時間\nfunction formatDateTime(date) {\n    return new Intl.DateTimeFormat(\"zh-TW\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        timeZone: \"Asia/Taipei\"\n    }).format(date);\n}\n// 格式化日期\nfunction formatDate(date) {\n    return new Intl.DateTimeFormat(\"zh-TW\", {\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        timeZone: \"Asia/Taipei\"\n    }).format(date);\n}\n// 檢查預約時間衝突\nfunction hasTimeConflict(start1, end1, start2, end2) {\n    return start1 < end2 && start2 < end1;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSjtBQUNKO0FBRTdCLFNBQVNHLEdBQUcsR0FBR0MsTUFBb0I7SUFDeEMsT0FBT0gsdURBQU9BLENBQUNELDBDQUFJQSxDQUFDSTtBQUN0QjtBQUVBLFdBQVc7QUFDSixTQUFTQyxVQUFVQyxJQUFVO0lBQ2xDLE1BQU1DLE1BQU1ELEtBQUtFLE1BQU07SUFDdkIsT0FBT0QsT0FBTyxLQUFLQSxPQUFPLEVBQUUsbUJBQW1COztBQUNqRDtBQUVBLFlBQVk7QUFDTCxTQUFTRSxnQkFBZ0JILElBQVU7SUFDeEMsTUFBTUksT0FBT0osS0FBS0ssV0FBVztJQUM3QixNQUFNQyxRQUFRTixLQUFLTyxRQUFRLEtBQUssRUFBRSwwQkFBMEI7O0lBQzVELE1BQU1OLE1BQU1ELEtBQUtRLE9BQU87SUFFeEIsMkJBQTJCO0lBQzNCLE1BQU1DLFdBQVc7UUFDZixXQUFXO1FBQ1g7WUFBRUgsT0FBTztZQUFHTCxLQUFLO1FBQUU7UUFDbkIsZUFBZTtRQUNmO1lBQUVLLE9BQU87WUFBR0wsS0FBSztRQUFHO1FBQ3BCLFlBQVk7UUFDWjtZQUFFSyxPQUFPO1lBQUdMLEtBQUs7UUFBRTtRQUNuQixZQUFZO1FBQ1o7WUFBRUssT0FBTztZQUFHTCxLQUFLO1FBQUU7UUFDbkIsY0FBYztRQUNkO1lBQUVLLE9BQU87WUFBSUwsS0FBSztRQUFHO0tBQ3RCO0lBRUQsT0FBT1EsU0FBU0MsSUFBSSxDQUFDQyxDQUFBQSxVQUFXQSxRQUFRTCxLQUFLLEtBQUtBLFNBQVNLLFFBQVFWLEdBQUcsS0FBS0E7QUFDN0U7QUFFQSx5QkFBeUI7QUFDbEIsU0FBU1csbUJBQW1CWixJQUFVO0lBQzNDLE1BQU1hLGVBQWVqQixvRkFBU0EsQ0FBQ0ksTUFBTSw2QkFBNkI7O0lBQ2xFLE1BQU1jLFlBQVlYLGdCQUFnQkg7SUFDbEMsT0FBTyxDQUFDYSxnQkFBZ0IsQ0FBQ0M7QUFDM0I7QUFFQSxnQkFBZ0I7QUFDVCxTQUFTQyxvQkFDZGYsSUFBVSxFQUNWZ0IsSUFBWSxFQUNaQyxTQUtFO0lBRUYsTUFBTUMsWUFBWWxCLEtBQUtFLE1BQU07SUFFN0IsT0FBT2UsVUFBVVAsSUFBSSxDQUFDUyxDQUFBQSxPQUNwQkEsS0FBS0MsUUFBUSxJQUNiRCxLQUFLRCxTQUFTLEtBQUtBLGFBQ25CRixRQUFRRyxLQUFLRSxTQUFTLElBQ3RCTCxPQUFPRyxLQUFLRyxPQUFPO0FBRXZCO0FBRUEsVUFBVTtBQUNILFNBQVNDLGVBQWV2QixJQUFVO0lBQ3ZDLE9BQU8sSUFBSXdCLEtBQUtDLGNBQWMsQ0FBQyxTQUFTO1FBQ3RDckIsTUFBTTtRQUNORSxPQUFPO1FBQ1BMLEtBQUs7UUFDTGUsTUFBTTtRQUNOVSxRQUFRO1FBQ1JDLFVBQVU7SUFDWixHQUFHQyxNQUFNLENBQUM1QjtBQUNaO0FBRUEsUUFBUTtBQUNELFNBQVM2QixXQUFXN0IsSUFBVTtJQUNuQyxPQUFPLElBQUl3QixLQUFLQyxjQUFjLENBQUMsU0FBUztRQUN0Q3JCLE1BQU07UUFDTkUsT0FBTztRQUNQTCxLQUFLO1FBQ0wwQixVQUFVO0lBQ1osR0FBR0MsTUFBTSxDQUFDNUI7QUFDWjtBQUVBLFdBQVc7QUFDSixTQUFTOEIsZ0JBQ2RDLE1BQVksRUFDWkMsSUFBVSxFQUNWQyxNQUFZLEVBQ1pDLElBQVU7SUFFVixPQUFPSCxTQUFTRyxRQUFRRCxTQUFTRDtBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NyeW8tYm9va2luZy8uL2xpYi91dGlscy50cz9mNzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgQ2xhc3NWYWx1ZSwgY2xzeCB9IGZyb20gXCJjbHN4XCJcclxuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiXHJcbmltcG9ydCB7IGlzV2Vla2VuZCB9IGZyb20gXCJkYXRlLWZuc1wiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY24oLi4uaW5wdXRzOiBDbGFzc1ZhbHVlW10pIHtcclxuICByZXR1cm4gdHdNZXJnZShjbHN4KGlucHV0cykpXHJcbn1cclxuXHJcbi8vIOaqouafpeaYr+WQpueCuuW3peS9nOaXpVxyXG5leHBvcnQgZnVuY3Rpb24gaXNXZWVrZGF5KGRhdGU6IERhdGUpOiBib29sZWFuIHtcclxuICBjb25zdCBkYXkgPSBkYXRlLmdldERheSgpXHJcbiAgcmV0dXJuIGRheSA+PSAxICYmIGRheSA8PSA1IC8vIE1vbmRheSB0byBGcmlkYXlcclxufVxyXG5cclxuLy8g5qqi5p+l5piv5ZCm54K65ZyL5a6a5YGH5pelXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1B1YmxpY0hvbGlkYXkoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcclxuICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDEgLy8gZ2V0TW9udGgoKSByZXR1cm5zIDAtMTFcclxuICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKVxyXG4gIFxyXG4gIC8vIOWPsOeBo+Wci+WumuWBh+aXpSAo57Ch5YyW54mI5pys77yM5Y+q5YyF5ZCr56K65a6a55qE5ZyL5a6a5YGH5pelKVxyXG4gIGNvbnN0IGhvbGlkYXlzID0gW1xyXG4gICAgLy8g5YWD5pemICgxLzEpXHJcbiAgICB7IG1vbnRoOiAxLCBkYXk6IDEgfSxcclxuICAgIC8vIOWSjOW5s+e0gOW/teaXpSAoMi8yOClcclxuICAgIHsgbW9udGg6IDIsIGRheTogMjggfSxcclxuICAgIC8vIOa4heaYjuevgCAoNC80KVxyXG4gICAgeyBtb250aDogNCwgZGF5OiA0IH0sXHJcbiAgICAvLyDli57li5Xnr4AgKDUvMSlcclxuICAgIHsgbW9udGg6IDUsIGRheTogMSB9LFxyXG4gICAgLy8g5ZyL5oW25pelICgxMC8xMClcclxuICAgIHsgbW9udGg6IDEwLCBkYXk6IDEwIH0sXHJcbiAgXVxyXG4gIFxyXG4gIHJldHVybiBob2xpZGF5cy5zb21lKGhvbGlkYXkgPT4gaG9saWRheS5tb250aCA9PT0gbW9udGggJiYgaG9saWRheS5kYXkgPT09IGRheSlcclxufVxyXG5cclxuLy8g5qqi5p+l5pel5pyf5piv5ZCm5Y+v5Lul6aCQ57SEICjpnZ7pgLHmnKvkuJTpnZ7lnIvlrprlgYfml6UpXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jvb2tpbmdBdmFpbGFibGUoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGlzV2Vla2VuZERheSA9IGlzV2Vla2VuZChkYXRlKSAvLyDkvb/nlKggZGF0ZS1mbnMg55qEIGlzV2Vla2VuZCDlh73lvI9cclxuICBjb25zdCBpc0hvbGlkYXkgPSBpc1B1YmxpY0hvbGlkYXkoZGF0ZSlcclxuICByZXR1cm4gIWlzV2Vla2VuZERheSAmJiAhaXNIb2xpZGF5XHJcbn1cclxuXHJcbi8vIOaqouafpeaZgumWk+aYr+WQpuWcqOWFgeioseeahOaZguauteWFp1xyXG5leHBvcnQgZnVuY3Rpb24gaXNUaW1lU2xvdEF2YWlsYWJsZShcclxuICBkYXRlOiBEYXRlLFxyXG4gIGhvdXI6IG51bWJlcixcclxuICB0aW1lU2xvdHM6IEFycmF5PHtcclxuICAgIGRheU9mV2VlazogbnVtYmVyXHJcbiAgICBzdGFydEhvdXI6IG51bWJlclxyXG4gICAgZW5kSG91cjogbnVtYmVyXHJcbiAgICBpc0FjdGl2ZTogYm9vbGVhblxyXG4gIH0+XHJcbik6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGRheU9mV2VlayA9IGRhdGUuZ2V0RGF5KClcclxuICBcclxuICByZXR1cm4gdGltZVNsb3RzLnNvbWUoc2xvdCA9PiBcclxuICAgIHNsb3QuaXNBY3RpdmUgJiZcclxuICAgIHNsb3QuZGF5T2ZXZWVrID09PSBkYXlPZldlZWsgJiZcclxuICAgIGhvdXIgPj0gc2xvdC5zdGFydEhvdXIgJiZcclxuICAgIGhvdXIgPCBzbG90LmVuZEhvdXJcclxuICApXHJcbn1cclxuXHJcbi8vIOagvOW8j+WMluaXpeacn+aZgumWk1xyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVRpbWUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCd6aC1UVycsIHtcclxuICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgIG1vbnRoOiAnMi1kaWdpdCcsXHJcbiAgICBkYXk6ICcyLWRpZ2l0JyxcclxuICAgIGhvdXI6ICcyLWRpZ2l0JyxcclxuICAgIG1pbnV0ZTogJzItZGlnaXQnLFxyXG4gICAgdGltZVpvbmU6ICdBc2lhL1RhaXBlaSdcclxuICB9KS5mb3JtYXQoZGF0ZSlcclxufVxyXG5cclxuLy8g5qC85byP5YyW5pel5pyfXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnemgtVFcnLCB7XHJcbiAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICBtb250aDogJzItZGlnaXQnLFxyXG4gICAgZGF5OiAnMi1kaWdpdCcsXHJcbiAgICB0aW1lWm9uZTogJ0FzaWEvVGFpcGVpJ1xyXG4gIH0pLmZvcm1hdChkYXRlKVxyXG59XHJcblxyXG4vLyDmqqLmn6XpoJDntITmmYLplpPooZ3nqoFcclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1RpbWVDb25mbGljdChcclxuICBzdGFydDE6IERhdGUsXHJcbiAgZW5kMTogRGF0ZSxcclxuICBzdGFydDI6IERhdGUsXHJcbiAgZW5kMjogRGF0ZVxyXG4pOiBib29sZWFuIHtcclxuICByZXR1cm4gc3RhcnQxIDwgZW5kMiAmJiBzdGFydDIgPCBlbmQxXHJcbn1cclxuIl0sIm5hbWVzIjpbImNsc3giLCJ0d01lcmdlIiwiaXNXZWVrZW5kIiwiY24iLCJpbnB1dHMiLCJpc1dlZWtkYXkiLCJkYXRlIiwiZGF5IiwiZ2V0RGF5IiwiaXNQdWJsaWNIb2xpZGF5IiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImdldERhdGUiLCJob2xpZGF5cyIsInNvbWUiLCJob2xpZGF5IiwiaXNCb29raW5nQXZhaWxhYmxlIiwiaXNXZWVrZW5kRGF5IiwiaXNIb2xpZGF5IiwiaXNUaW1lU2xvdEF2YWlsYWJsZSIsImhvdXIiLCJ0aW1lU2xvdHMiLCJkYXlPZldlZWsiLCJzbG90IiwiaXNBY3RpdmUiLCJzdGFydEhvdXIiLCJlbmRIb3VyIiwiZm9ybWF0RGF0ZVRpbWUiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJtaW51dGUiLCJ0aW1lWm9uZSIsImZvcm1hdCIsImZvcm1hdERhdGUiLCJoYXNUaW1lQ29uZmxpY3QiLCJzdGFydDEiLCJlbmQxIiwic3RhcnQyIiwiZW5kMiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/@next-auth","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/tailwind-merge","vendor-chunks/date-fns","vendor-chunks/clsx"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbookings%2Froute&page=%2Fapi%2Fbookings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbookings%2Froute.ts&appDir=D%3A%5Cgithub%5Ccryo-booking%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub%5Ccryo-booking&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();